; ============================================================
; PlatformIO Project Configuration File
; ============================================================

[platformio]
default_envs = usb

; ============================================================
; COMMON SETTINGS (shared by all environments)
; ============================================================
[env]
platform = espressif32
board = nodemcu-32s
framework = arduino

monitor_speed = 115200
upload_speed = 921600

; ðŸ”‘ INCLUDE ALL SOURCE FILES AND SUBDIRECTORIES
build_src_filter = +<*>

lib_deps =
    fastled/FastLED
    knolleary/PubSubClient
    bblanchon/ArduinoJson

build_flags =
    -D MQTT_MAX_PACKET_SIZE=1024
    -D DEBUG_SERIAL

; ============================================================
; USB ENVIRONMENT (development / serial debug)
; ============================================================
[env:usb]
upload_protocol = esptool

; ============================================================
; OTA ENVIRONMENT (shelf-mounted updates)
; ============================================================
[env:ota]
upload_protocol = espota
upload_port = 192.168.4.152
upload_flags =
    --auth=letmein
